{"version":3,"sources":["webpack:///./src/pages/chat_list/view_chatlist_catalog_admin.js"],"names":["__webpack_exports__","name","mixins","CatalogMixin","data","table_class","order_by_type","search_key","sql_hack","contentStyle","backgroundColor","fontSize","textAlign","table_columns","align","field","label","renderData","staticClass","style","minWidth","fontWeight","maxWidth","render","h","value","props","on","click","expand","Optional","ofNullable","orElse","ajax_delete_chat_info","row","id","then","d","status","window","location","reload","methods","render_search","_this","this","LazyInput","placeholder","width","input","v","$nextTick","refresh_catalog","render_order_btn","_this2","marginTop","color","textColor","type","flat","nativeOn","render_sql_hack_btn","_this3","self","anchor","offset","render_table_expand","content","length","Editor","editorStyle","desText","border","readonly","toolBarHide","request","_this4","ajax_chat_info_list_search","page","rows","dataList","rowsNumber","count","catch","$q","err","_this5","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","chat_order_by_enum","map","key","columns","rowKey","table_row_key","pagination","pagination_ctl","rowsPerPageOptions","rowsPerPageLabel","noDataLabel","hideBottom","scopedSlots","__render_scope_slot","__request"],"mappings":"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","file":"static/js/9.70299ad90a37aec23b14.js","sourcesContent":["import CatalogMixin from '../../components/catalog/MixinExpandableCatalogBase'\nimport {Optional} from '../../utils/Optional'\nimport {chat_order_by_enum} from '../../dictionary/chat_dictionary'\nimport LazyInput from '../../components/catalog/ComponentLazyInput'\nimport {ajax_chat_info_list_search,ajax_delete_chat_info} from '../../api/chat/chat_info_api'\nimport Editor from '../../components/editor/Editor'\n\nexport default {\n  name: 'view_chatlist_catalog_admin',\n  mixins: [CatalogMixin],\n  data: () => ({\n    table_class: 'flex items-center ',\n    order_by_type: 1,\n    search_key: '',\n    sql_hack: false,\n    contentStyle: {backgroundColor: '#e3f2fd!important', fontSize: '18px', textAlign: 'left'},\n    table_columns: [\n      {\n        name: 'id',\n        align: 'left',\n        field: 'id',\n        label: 'ID',\n        renderData: {staticClass: 'text-tertiary ', style: {minWidth: '50px', fontWeight: '700'}}\n      },\n      {\n        name: 'title',\n        align: 'left',\n        field: 'title',\n        label: '标题',\n        renderData: {\n          staticClass: 'text-primary nowrap ellipsis overflow-hidden',\n          style: {\n            maxWidth: '600px',\n            fontWeight: '700',\n          }\n        },\n        render: (h, value, props) => {\n          return h('div', {\n            staticClass: 'cursor-pointer',\n            on: {\n              click: () => props.expand = !props.expand\n            }\n          }, Optional.ofNullable(value).orElse('--'))\n        }\n\n      },\n      {\n        name: 'praise_count',\n        align:\n          'left',\n        field:\n          'praise_count',\n        label:\n          '获赞数',\n        renderData:\n          {\n            staticClass: 'text-tertiary', style:\n              {\n                minWidth: '100px', fontWeight:\n                  '700'\n              }\n          }\n        ,\n        render: (h, value, props) => Optional.ofNullable(value).orElse('0')\n      }\n      ,\n      {\n        name: 'login_name',\n        align:\n          'left',\n        field:\n          'login_name',\n        label:\n          '创建人',\n        renderData:\n          {\n            staticClass: 'text-tertiary', style:\n              {\n                minWidth: '100px', fontWeight:\n                  '700'\n              }\n          }\n        ,\n        render: (h, value, props) => Optional.ofNullable(value).orElse('--')\n      }\n      ,\n      {\n        name: 'create_time',\n        align:\n          'left',\n        field:\n          'create_time',\n        label:\n          '创建时间',\n        renderData:\n          {\n            staticClass: 'text-tertiary', style:\n              {\n                minWidth: '100px', fontWeight:\n                  '700'\n              }\n          }\n        ,\n        render: (h, value, props) => Optional.ofNullable(value).orElse('--')\n      },\n      {\n        name: 'options',\n        align: 'left',\n        field: 'options',\n        label: '操作',\n        renderData: {staticClass: 'text-tertiary ', style: {minWidth: '50px', fontWeight: '700'}},\n        render: (h, value, props) => {\n          return h('div',{\n            staticClass:'text-primary cursor-pointer text-weight-bold',\n            on:{\n              click:()=>{\n                ajax_delete_chat_info(props.row.id).then(d=>{\n                  if(d.status===1)\n                   window.location.reload()\n                })\n              }\n            }\n          },'删除')\n        }\n      },\n    ],\n  }),\n  methods: {\n    render_search (h) {\n      return h('div', {\n        staticClass: 'q-mb-sm'\n      }, [\n        h(LazyInput, {\n          props: {\n            value: this.search_key,\n            placeholder: '按标题搜索',\n            width: 245\n          },\n          on: {\n            input: v => {\n              this.search_key = v\n              this.$nextTick(this.refresh_catalog)\n            }\n          }\n        })\n      ])\n    }\n    ,\n    render_order_btn (h, data) {\n      return h('div', {\n        staticClass: 'q-ml-md',\n        style: {\n          marginTop: '5px'\n        }\n      }, [\n        h('q-btn', {\n          staticClass: 'no-shadow',\n          props: {\n            label: data.label,\n            color: 'deep-orange-1',\n            textColor: this.order_by_type === data.type ? 'deep-orange' : data.color,\n            flat: this.order_by_type === data.type ? false : true,\n          },\n          nativeOn: {\n            click: () => {\n              this.order_by_type = data.type\n              this.refresh_catalog()\n            }\n          }\n        },)\n      ])\n    },\n    render_sql_hack_btn (h) {\n      return h('div', {\n        staticClass: 'q-ml-md',\n        style: {\n          marginTop: '5px'\n        }\n      }, [\n        h('q-btn', {\n          staticClass: 'no-shadow',\n          props: {\n            label: this.sql_hack ? '关闭' : '开启',\n            color: 'deep-orange-1',\n            textColor: this.sql_hack ? 'deep-orange' : 'dark',\n            flat: this.sql_hack ? false : true,\n          },\n          nativeOn: {\n            click: () => {\n              this.sql_hack = !this.sql_hack\n            }\n          }\n        }, [h('q-tooltip', {\n          staticClass: 'font-md q-pa-sm',\n          props: {\n            self: 'bottom left',\n            anchor: 'top right',\n            offset: [0, 0],\n          },\n        }, ['注入开关'])])\n      ])\n    }\n    ,\n    render_table_expand (h, props) {\n      if (!props.row.content || props.row.content.length === 0) {\n        return h('span', {staticClass: 'text-faded q-pl-lg'}, '无聊天内容信息！')\n      }\n      return h(Editor, {\n        props: {\n          editorStyle: this.editorStyle,\n          contentStyle: this.contentStyle,\n          desText: props.row.content,\n          border: false,\n          readonly: true,\n          toolBarHide: true\n        }\n      })\n    }\n    ,\n    request () {\n      this.refresh_catalog()\n    }\n    ,\n    refresh_catalog () {\n      ajax_chat_info_list_search(this.search_key, this.page, this.order_by_type, this.sql_hack)\n        .then(d => {\n          this.rows = d.data.dataList || []\n          this.rowsNumber = d.data.count\n        })\n        .catch(() => this.$q.err('获取聊天列表异常'))\n    },\n  }\n  ,\n  render (h) {\n    return h('div', {staticClass: 'q-ml-md q-mr-md'}, [\n      h('div', {staticClass: 'row col-12 flex q-pt-md'}, [\n        this.render_search(h),\n        h('div', {\n          staticClass: 'row q-ml-md',\n        }, [\n          Object.keys(chat_order_by_enum).map(key => [\n            this.render_order_btn(h, chat_order_by_enum[key])\n          ])]),\n        this.render_sql_hack_btn(h)\n      ]),\n      h('q-table', {\n        staticClass: 'shadow-0 overflow-hidden' + this.table_class,\n        props: {\n          color: 'primary',\n          data: this.rows,\n          columns: this.table_columns,\n          rowKey: this.table_row_key,\n          pagination: this.pagination_ctl,\n          rowsPerPageOptions: [10],\n          rowsPerPageLabel: this.rowsPerPageLabel,\n          noDataLabel: this.noDataLabel,\n          hideBottom: !this.rowsNumber,\n        },\n        scopedSlots: this.__render_scope_slot(h),\n        on: {request: this.__request}\n      })\n    ])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/chat_list/view_chatlist_catalog_admin.js"],"sourceRoot":""}